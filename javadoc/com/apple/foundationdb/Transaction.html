<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Transaction (FoundationDB Java Client API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Transaction (FoundationDB Java Client API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":38,"i9":6,"i10":6,"i11":6,"i12":6,"i13":6,"i14":6,"i15":6,"i16":6,"i17":6,"i18":6,"i19":6,"i20":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.apple.foundationdb</a></div>
<h2 title="Interface Transaction" class="title">Interface Transaction</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code>java.lang.AutoCloseable</code>, <code><a href="ReadTransaction.html" title="interface in com.apple.foundationdb">ReadTransaction</a></code>, <code><a href="ReadTransactionContext.html" title="interface in com.apple.foundationdb">ReadTransactionContext</a></code>, <code><a href="TransactionContext.html" title="interface in com.apple.foundationdb">TransactionContext</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">Transaction</span>
extends java.lang.AutoCloseable, <a href="ReadTransaction.html" title="interface in com.apple.foundationdb">ReadTransaction</a>, <a href="TransactionContext.html" title="interface in com.apple.foundationdb">TransactionContext</a></pre>
<div class="block">A Transaction represents a FoundationDB database transaction. All operations on FoundationDB
  take place, explicitly or implicitly, through a Transaction.<br>
  <br>
 In FoundationDB, a transaction is a mutable snapshot of a database. All read and write operations
  on a transaction see and modify an otherwise-unchanging version of the database and only change
  the underlying database if and when the transaction is committed. Read operations do see the
  effects of previous write operations on the same transaction. Committing a transaction usually
  succeeds in the absence of
  <a href="/foundationdb/developer-guide.html#developer-guide-transaction-conflicts" target="_blank">conflicts</a>.<br>
  <br>
 Transactions group operations into a unit with the properties of atomicity, isolation, and
  durability. Transactions also provide the ability to maintain an application's invariants or
  integrity constraints, supporting the property of consistency. Together these properties are
  known as <a href="/foundationdb/developer-guide.html#acid" target="_blank">ACID</a>.<br>
  <br>
 Transactions are also causally consistent: once a transaction has been successfully committed,
  all subsequently created transactions will see the modifications made by it.
 The most convenient way for a developer to manage the lifecycle and retrying
  of a <code>Transaction</code> is to use <a href="Database.html#run(java.util.function.Function)"><code>Database.run(Function)</code></a>. Otherwise, the client
  must have retry logic for fatal failures, failures to commit, and other transient errors.<br>
 <br>
 Keys and values in FoundationDB are byte arrays. To encode other data types, see the
  <a href="tuple/Tuple.html" title="class in com.apple.foundationdb.tuple"><code>Tuple API</code></a> and
  <a href="/foundationdb/data-modeling.html#data-modeling-tuples" target="_blank">tuple layer documentation</a>.<br>
 <br>
 When used as a <a href="TransactionContext.html" title="interface in com.apple.foundationdb"><code>TransactionContext</code></a>, the methods <code>run()</code> and
  <code>runAsync()</code> on a <code>Transaction</code> will simply attempt the operations
  without any retry loop.<br>
 <br>
 <b>Note:</b> Client must call <a href="#commit()"><code>commit()</code></a> and wait on the result on all transactions, even
  ones that only read. This is done automatically when using the retry loops from
  <a href="Database.html#run(java.util.function.Function)"><code>Database.run(Function)</code></a>. This is because outstanding reads originating from a
  <code>Transaction</code> will be cancelled when a <code>Transaction</code> is garbage collected.
  Since the garbage collector reserves the right to collect an in-scope object if it
  determines that there are no subsequent references it it, this can happen in seemingly
  innocuous situations. <code>CompletableFuture</code>s returned from <code>commit()</code> will block until
  all reads are complete, thereby saving the calling code from this potentially confusing
  situation.<br>
 <br>
 <b>Note:</b> All keys with a first byte of <code>0xff</code> are reserved for internal use.<br>
 <br>
 <b>Note:</b> Java transactions automatically set the <a href="TransactionOptions.html#setUsedDuringCommitProtectionDisable()"><code>TransactionOptions.setUsedDuringCommitProtectionDisable()</code></a>
  option. This is because the Java bindings disallow use of <code>Transaction</code> objects after <a href="#onError(java.lang.Throwable)"><code>onError(java.lang.Throwable)</code></a>
  is called.<br>
 <br>
 <b>Note:</b> <code>Transaction</code> objects must be <a href="#close()"><code>closed</code></a> when no longer
  in use in order to free any associated resources.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.com.apple.foundationdb.ReadTransaction">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.apple.foundationdb.<a href="ReadTransaction.html" title="interface in com.apple.foundationdb">ReadTransaction</a></h3>
<code><a href="ReadTransaction.html#ROW_LIMIT_UNLIMITED">ROW_LIMIT_UNLIMITED</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addReadConflictKey(byte%5B%5D)">addReadConflictKey</a></span>&#8203;(byte[]&nbsp;key)</code></th>
<td class="colLast">
<div class="block">Adds a key to the transaction's read conflict ranges as if you had read
 the key.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addReadConflictRange(byte%5B%5D,byte%5B%5D)">addReadConflictRange</a></span>&#8203;(byte[]&nbsp;keyBegin,
                    byte[]&nbsp;keyEnd)</code></th>
<td class="colLast">
<div class="block">Adds a range of keys to the transaction's read conflict ranges as if you
 had read the range.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addWriteConflictKey(byte%5B%5D)">addWriteConflictKey</a></span>&#8203;(byte[]&nbsp;key)</code></th>
<td class="colLast">
<div class="block">Adds a key to the transaction's write conflict ranges as if you had
 written the key.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addWriteConflictRange(byte%5B%5D,byte%5B%5D)">addWriteConflictRange</a></span>&#8203;(byte[]&nbsp;keyBegin,
                     byte[]&nbsp;keyEnd)</code></th>
<td class="colLast">
<div class="block">Adds a range of keys to the transaction's write conflict ranges as if you
 had cleared the range.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cancel()">cancel</a></span>()</code></th>
<td class="colLast">
<div class="block">Cancels the <code>Transaction</code>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clear(byte%5B%5D)">clear</a></span>&#8203;(byte[]&nbsp;key)</code></th>
<td class="colLast">
<div class="block">Clears a given key from the database.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clear(byte%5B%5D,byte%5B%5D)">clear</a></span>&#8203;(byte[]&nbsp;beginKey,
     byte[]&nbsp;endKey)</code></th>
<td class="colLast">
<div class="block">Clears a range of keys in the database.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clear(com.apple.foundationdb.Range)">clear</a></span>&#8203;(<a href="Range.html" title="class in com.apple.foundationdb">Range</a>&nbsp;range)</code></th>
<td class="colLast">
<div class="block">Clears a range of keys in the database.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearRangeStartsWith(byte%5B%5D)">clearRangeStartsWith</a></span>&#8203;(byte[]&nbsp;prefix)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span></div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Close the <code>Transaction</code> object and release any associated resources.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;java.lang.Void&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#commit()">commit</a></span>()</code></th>
<td class="colLast">
<div class="block">Commit this <code>Transaction</code>.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getApproximateSize()">getApproximateSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns a future that will contain the approximated size of the commit, which is the
 summation of mutations, read conflict ranges, and write conflict ranges.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.lang.Long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCommittedVersion()">getCommittedVersion</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets the version number at which a successful commit modified the database.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="Database.html" title="interface in com.apple.foundationdb">Database</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDatabase()">getDatabase</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the <a href="Database.html" title="interface in com.apple.foundationdb"><code>Database</code></a> that this <code>Transaction</code> is interacting
 with.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;byte[]&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getVersionstamp()">getVersionstamp</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns a future which will contain the versionstamp which was used by any versionstamp 
 operations in this transaction.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mutate(com.apple.foundationdb.MutationType,byte%5B%5D,byte%5B%5D)">mutate</a></span>&#8203;(<a href="MutationType.html" title="enum in com.apple.foundationdb">MutationType</a>&nbsp;optype,
      byte[]&nbsp;key,
      byte[]&nbsp;param)</code></th>
<td class="colLast">
<div class="block">An atomic operation is a single database command that carries out several
 logical steps: reading the value of a key, performing a transformation on
 that value, and writing the result.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;<a href="Transaction.html" title="interface in com.apple.foundationdb">Transaction</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onError(java.lang.Throwable)">onError</a></span>&#8203;(java.lang.Throwable&nbsp;e)</code></th>
<td class="colLast">
<div class="block">Resets a transaction and returns a delayed signal for error recovery.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run(java.util.function.Function)">run</a></span>&#8203;(java.util.function.Function&lt;? super <a href="Transaction.html" title="interface in com.apple.foundationdb">Transaction</a>,&#8203;T&gt;&nbsp;retryable)</code></th>
<td class="colLast">
<div class="block">Run a function once against this <code>Transaction</code>.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;java.util.concurrent.CompletableFuture&lt;T&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#runAsync(java.util.function.Function)">runAsync</a></span>&#8203;(java.util.function.Function&lt;? super <a href="Transaction.html" title="interface in com.apple.foundationdb">Transaction</a>,&#8203;? extends java.util.concurrent.CompletableFuture&lt;T&gt;&gt;&nbsp;retryable)</code></th>
<td class="colLast">
<div class="block">Run a function once against this <code>Transaction</code>.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#set(byte%5B%5D,byte%5B%5D)">set</a></span>&#8203;(byte[]&nbsp;key,
   byte[]&nbsp;value)</code></th>
<td class="colLast">
<div class="block">Sets the value for a given key.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;java.lang.Void&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#watch(byte%5B%5D)">watch</a></span>&#8203;(byte[]&nbsp;key)</code></th>
<td class="colLast">
<div class="block">Creates a watch that will become ready when it reports a change to
 the value of the specified key.<br>
 <br>
 A watch's behavior is relative to the transaction that created it.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.com.apple.foundationdb.ReadTransaction">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.apple.foundationdb.<a href="ReadTransaction.html" title="interface in com.apple.foundationdb">ReadTransaction</a></h3>
<code><a href="ReadTransaction.html#addReadConflictKeyIfNotSnapshot(byte%5B%5D)">addReadConflictKeyIfNotSnapshot</a>, <a href="ReadTransaction.html#addReadConflictRangeIfNotSnapshot(byte%5B%5D,byte%5B%5D)">addReadConflictRangeIfNotSnapshot</a>, <a href="ReadTransaction.html#get(byte%5B%5D)">get</a>, <a href="ReadTransaction.html#getEstimatedRangeSizeBytes(byte%5B%5D,byte%5B%5D)">getEstimatedRangeSizeBytes</a>, <a href="ReadTransaction.html#getEstimatedRangeSizeBytes(com.apple.foundationdb.Range)">getEstimatedRangeSizeBytes</a>, <a href="ReadTransaction.html#getKey(com.apple.foundationdb.KeySelector)">getKey</a>, <a href="ReadTransaction.html#getRange(byte%5B%5D,byte%5B%5D)">getRange</a>, <a href="ReadTransaction.html#getRange(byte%5B%5D,byte%5B%5D,int)">getRange</a>, <a href="ReadTransaction.html#getRange(byte%5B%5D,byte%5B%5D,int,boolean)">getRange</a>, <a href="ReadTransaction.html#getRange(byte%5B%5D,byte%5B%5D,int,boolean,com.apple.foundationdb.StreamingMode)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.KeySelector,com.apple.foundationdb.KeySelector)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.KeySelector,com.apple.foundationdb.KeySelector,int)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.KeySelector,com.apple.foundationdb.KeySelector,int,boolean)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.KeySelector,com.apple.foundationdb.KeySelector,int,boolean,com.apple.foundationdb.StreamingMode)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.Range)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.Range,int)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.Range,int,boolean)">getRange</a>, <a href="ReadTransaction.html#getRange(com.apple.foundationdb.Range,int,boolean,com.apple.foundationdb.StreamingMode)">getRange</a>, <a href="ReadTransaction.html#getReadVersion()">getReadVersion</a>, <a href="ReadTransaction.html#isSnapshot()">isSnapshot</a>, <a href="ReadTransaction.html#options()">options</a>, <a href="ReadTransaction.html#setReadVersion(long)">setReadVersion</a>, <a href="ReadTransaction.html#snapshot()">snapshot</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.com.apple.foundationdb.ReadTransactionContext">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.apple.foundationdb.<a href="ReadTransactionContext.html" title="interface in com.apple.foundationdb">ReadTransactionContext</a></h3>
<code><a href="ReadTransactionContext.html#getExecutor()">getExecutor</a>, <a href="ReadTransactionContext.html#read(java.util.function.Function)">read</a>, <a href="ReadTransactionContext.html#readAsync(java.util.function.Function)">readAsync</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="addReadConflictRange(byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addReadConflictRange</h4>
<pre class="methodSignature">void&nbsp;addReadConflictRange&#8203;(byte[]&nbsp;keyBegin,
                          byte[]&nbsp;keyEnd)</pre>
<div class="block">Adds a range of keys to the transaction's read conflict ranges as if you
 had read the range. As a result, other transactions that write a key in
 this range could cause the transaction to fail with a conflict.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keyBegin</code> - the first key in the range (inclusive)</dd>
<dd><code>keyEnd</code> - the ending key for the range (exclusive)</dd>
</dl>
</li>
</ul>
<a id="addReadConflictKey(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addReadConflictKey</h4>
<pre class="methodSignature">void&nbsp;addReadConflictKey&#8203;(byte[]&nbsp;key)</pre>
<div class="block">Adds a key to the transaction's read conflict ranges as if you had read
 the key. As a result, other transactions that concurrently write this key
 could cause the transaction to fail with a conflict.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key to be added to the read conflict range set</dd>
</dl>
</li>
</ul>
<a id="addWriteConflictRange(byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addWriteConflictRange</h4>
<pre class="methodSignature">void&nbsp;addWriteConflictRange&#8203;(byte[]&nbsp;keyBegin,
                           byte[]&nbsp;keyEnd)</pre>
<div class="block">Adds a range of keys to the transaction's write conflict ranges as if you
 had cleared the range. As a result, other transactions that concurrently
 read a key in this range could fail with a conflict.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keyBegin</code> - the first key in the range (inclusive)</dd>
<dd><code>keyEnd</code> - the ending key for the range (exclusive)</dd>
</dl>
</li>
</ul>
<a id="addWriteConflictKey(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addWriteConflictKey</h4>
<pre class="methodSignature">void&nbsp;addWriteConflictKey&#8203;(byte[]&nbsp;key)</pre>
<div class="block">Adds a key to the transaction's write conflict ranges as if you had
 written the key. As a result, other transactions that concurrently read
 this key could fail with a conflict.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key to be added to the range</dd>
</dl>
</li>
</ul>
<a id="set(byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set</h4>
<pre class="methodSignature">void&nbsp;set&#8203;(byte[]&nbsp;key,
         byte[]&nbsp;value)</pre>
<div class="block">Sets the value for a given key. This will not affect the
 database until <a href="#commit()"><code>commit()</code></a> is called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key whose value is to be set</dd>
<dd><code>value</code> - the value to set in the database</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if <code>key</code> or <code>value</code> is <code>null</code></dd>
<dd><code><a href="FDBException.html" title="class in com.apple.foundationdb">FDBException</a></code> - if the set operation otherwise fails</dd>
</dl>
</li>
</ul>
<a id="clear(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre class="methodSignature">void&nbsp;clear&#8203;(byte[]&nbsp;key)</pre>
<div class="block">Clears a given key from the database. This will not affect the
 database until <a href="#commit()"><code>commit()</code></a> is called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key whose value is to be cleared</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if <code>key</code> is <code>null</code></dd>
<dd><code><a href="FDBException.html" title="class in com.apple.foundationdb">FDBException</a></code> - if clear operation otherwise fails</dd>
</dl>
</li>
</ul>
<a id="clear(byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre class="methodSignature">void&nbsp;clear&#8203;(byte[]&nbsp;beginKey,
           byte[]&nbsp;endKey)</pre>
<div class="block">Clears a range of keys in the database.  The upper bound of the range is
  exclusive; that is, the key (if one exists) that is specified as the end
  of the range will NOT be cleared as part of this operation. Range clears are
  efficient with FoundationDB -- clearing large amounts of data will be fast.
  This will not affect the database until <a href="#commit()"><code>commit()</code></a> is called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>beginKey</code> - the first clear</dd>
<dd><code>endKey</code> - the key one past the last key to clear</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if <code>beginKey</code> or <code>endKey</code> is <code>null</code></dd>
<dd><code><a href="FDBException.html" title="class in com.apple.foundationdb">FDBException</a></code> - if the clear operation otherwise fails</dd>
</dl>
</li>
</ul>
<a id="clear(com.apple.foundationdb.Range)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre class="methodSignature">void&nbsp;clear&#8203;(<a href="Range.html" title="class in com.apple.foundationdb">Range</a>&nbsp;range)</pre>
<div class="block">Clears a range of keys in the database. The upper bound of the range is
  exclusive; that is, the key (if one exists) that is specified as the end
  of the range will NOT be cleared as part of this operation.  Range clears are
  efficient with FoundationDB -- clearing large amounts of data will be fast.
  However, this will not immediately free up disk - data for the deleted range
  is cleaned up in the background.
  This will not affect the database until <a href="#commit()"><code>commit()</code></a> is called.
  <br>
  For purposes of computing the transaction size, only the begin and end keys of a clear range are counted.
  The size of the data stored in the range does not count against the transaction size limit.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>range</code> - the range of keys to clear</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="FDBException.html" title="class in com.apple.foundationdb">FDBException</a></code> - if the clear operation fails</dd>
</dl>
</li>
</ul>
<a id="clearRangeStartsWith(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearRangeStartsWith</h4>
<pre class="methodSignature">@Deprecated
void&nbsp;clearRangeStartsWith&#8203;(byte[]&nbsp;prefix)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span></div>
<div class="block">Replace with calls to <a href="#clear(com.apple.foundationdb.Range)"><code>clear(Range)</code></a> with a parameter from a call to
  <a href="Range.html#startsWith(byte%5B%5D)"><code>Range.startsWith(byte[])</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>prefix</code> - the starting bytes from the keys to be cleared.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="FDBException.html" title="class in com.apple.foundationdb">FDBException</a></code> - if the clear-range operation fails</dd>
</dl>
</li>
</ul>
<a id="mutate(com.apple.foundationdb.MutationType,byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mutate</h4>
<pre class="methodSignature">void&nbsp;mutate&#8203;(<a href="MutationType.html" title="enum in com.apple.foundationdb">MutationType</a>&nbsp;optype,
            byte[]&nbsp;key,
            byte[]&nbsp;param)</pre>
<div class="block">An atomic operation is a single database command that carries out several
 logical steps: reading the value of a key, performing a transformation on
 that value, and writing the result. Different atomic operations perform
 different transformations. Like other database operations, an atomic
 operation is used within a transaction.<br>
 <br>
 Atomic operations do not expose the current value of the key to the client
 but simply send the database the transformation to apply. In regard to
 conflict checking, an atomic operation is equivalent to a write without a
 read. It can only cause other transactions performing reads of the key
 to conflict.<br>
 <br>
 By combining these logical steps into a single, read-free operation,
 FoundationDB can guarantee that the transaction will not conflict due to
 the operation. This makes atomic operations ideal for operating on keys
 that are frequently modified. A common example is the use of a key-value
 pair as a counter.<br>
 <br>
 <b>Note:</b> If a transaction uses both an atomic operation and a serializable
 read on the same key, the benefits of using the atomic operation (for both
 conflict checking and performance) are lost.

 The behavior of each <a href="MutationType.html" title="enum in com.apple.foundationdb"><code>MutationType</code></a> is documented at its definition.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>optype</code> - the operation to perform</dd>
<dd><code>key</code> - the target of the operation</dd>
<dd><code>param</code> - the value with which to modify the key</dd>
</dl>
</li>
</ul>
<a id="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre class="methodSignature">java.util.concurrent.CompletableFuture&lt;java.lang.Void&gt;&nbsp;commit()</pre>
<div class="block">Commit this <code>Transaction</code>. See notes in class description. Consider using
  <code>Database</code>'s <a href="Database.html#run(java.util.function.Function)"><code>run()</code></a> calls for managing
  transactional access to FoundationDB.

 <p>
 As with other client/server databases, in some failure scenarios a client may
  be unable to determine whether a transaction succeeded. In these cases, an
  <a href="FDBException.html" title="class in com.apple.foundationdb"><code>FDBException</code></a> will be thrown with error code <code>commit_unknown_result</code> (1021).
  The <a href="#onError(java.lang.Throwable)"><code>onError(java.lang.Throwable)</code></a> function regards this exception as a retryable one, so
  retry loops that don't specifically detect <code>commit_unknown_result</code> could end
  up executing a transaction twice. For more information, see the FoundationDB
  Developer Guide documentation.
 </p>

 <p>
 If any operation is performed on a transaction after a commit has been
  issued but before it has returned, both the commit and the operation will
  throw an error code <code>used_during_commit</code> (2017). In this case, all
  subsequent operations on this transaction will throw this error.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletableFuture</code> that, when set without error, guarantees the
  <code>Transaction</code>'s modifications committed durably to the
  database. If the commit failed, it will throw an <a href="FDBException.html" title="class in com.apple.foundationdb"><code>FDBException</code></a>.</dd>
</dl>
</li>
</ul>
<a id="getCommittedVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommittedVersion</h4>
<pre class="methodSignature">java.lang.Long&nbsp;getCommittedVersion()</pre>
<div class="block">Gets the version number at which a successful commit modified the database.
 This must be called only after the successful (non-error) completion of a call
 to <a href="#commit()"><code>commit()</code></a> on this <code>Transaction</code>, or the behavior is undefined.
 Read-only transactions do not modify the database when committed and will have
 a committed version of -1. Keep in mind that a transaction which reads keys and
 then sets them to their current values may be optimized to a read-only transaction.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the database version at which the commit succeeded</dd>
</dl>
</li>
</ul>
<a id="getVersionstamp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionstamp</h4>
<pre class="methodSignature">java.util.concurrent.CompletableFuture&lt;byte[]&gt;&nbsp;getVersionstamp()</pre>
<div class="block">Returns a future which will contain the versionstamp which was used by any versionstamp 
 operations in this transaction. The future will be ready only after the successful 
 completion of a call to <a href="#commit()"><code>commit()</code></a> on this <code>Transaction</code>. Read-only 
 transactions do not modify the database when committed and will result in the future 
 completing with an error. Keep in mind that a transaction which reads keys and then sets 
 them to their current values may be optimized to a read-only transaction.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future containing the versionstamp which was used for any versionstamp operations 
 in this transaction</dd>
</dl>
</li>
</ul>
<a id="getApproximateSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getApproximateSize</h4>
<pre class="methodSignature">java.util.concurrent.CompletableFuture&lt;java.lang.Long&gt;&nbsp;getApproximateSize()</pre>
<div class="block">Returns a future that will contain the approximated size of the commit, which is the
 summation of mutations, read conflict ranges, and write conflict ranges. This can be
 called multiple times before transaction commit.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future that will contain the approximated size of the commit.</dd>
</dl>
</li>
</ul>
<a id="onError(java.lang.Throwable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onError</h4>
<pre class="methodSignature">java.util.concurrent.CompletableFuture&lt;<a href="Transaction.html" title="interface in com.apple.foundationdb">Transaction</a>&gt;&nbsp;onError&#8203;(java.lang.Throwable&nbsp;e)</pre>
<div class="block">Resets a transaction and returns a delayed signal for error recovery.  If the error
  encountered by the <code>Transaction</code> could not be recovered from, the returned
  <code>CompletableFuture</code> will be set to an error state.

 The current <code>Transaction</code> object will be invalidated by this call and will throw errors
  when used. The newly reset <code>Transaction</code> will be returned through the <code>CompletableFuture</code>
  if the error was retryable.

 If the error is not retryable, then no reset <code>Transaction</code> is returned, leaving this
  <code>Transaction</code> permanently invalidated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - the error caught while executing get()s and set()s on this <code>Transaction</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletableFuture</code> to be set with a reset <code>Transaction</code> object to retry the transaction</dd>
</dl>
</li>
</ul>
<a id="cancel()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancel</h4>
<pre class="methodSignature">void&nbsp;cancel()</pre>
<div class="block">Cancels the <code>Transaction</code>. All pending and any future uses of the
  <code>Transaction</code> will throw an <code>RuntimeException</code>.</div>
</li>
</ul>
<a id="watch(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>watch</h4>
<pre class="methodSignature">java.util.concurrent.CompletableFuture&lt;java.lang.Void&gt;&nbsp;watch&#8203;(byte[]&nbsp;key)
                                                      throws <a href="FDBException.html" title="class in com.apple.foundationdb">FDBException</a></pre>
<div class="block">Creates a watch that will become ready when it reports a change to
 the value of the specified key.<br>
 <br>
 A watch's behavior is relative to the transaction that created it. A
 watch will report a change in relation to the key's value as readable by
 that transaction. The initial value used for comparison is either that of
 the transaction's read version or the value as modified by the transaction
 itself prior to the creation of the watch. If the value changes and then
 changes back to its initial value, the watch might not report the change.<br>
 <br>
 Until the transaction that created it has been committed, a watch will
 not report changes made by other transactions. In contrast, a watch
 will immediately report changes made by the transaction itself. Watches
 cannot be created if the transaction has set
 <a href="TransactionOptions.html#setReadYourWritesDisable()"><code>TransactionOptions.setReadYourWritesDisable()</code></a>, and an attempt to do
 so will raise a <code>watches_disabled</code> exception.<br>
 <br>
 If the transaction used to create a watch encounters an exception during
 commit, then the watch will be set with that exception. A transaction whose
 commit result is unknown will set all of its watches with the
 <code>commit_unknown_result</code> exception. If an uncommitted transaction is
 reset via <a href="#onError(java.lang.Throwable)"><code>onError(java.lang.Throwable)</code></a> or destroyed, then any watches it created will be set
 with the <code>transaction_cancelled</code> exception.<br>
 <br>
 By default, each database connection can have no more than 10,000 watches
 that have not yet reported a change. When this number is exceeded, an
 attempt to create a watch will raise a <code>too_many_watches</code> exception.
 Because a watch outlives the transaction that creates it, any watch that is no
 longer needed should be cancelled.<br>
 <br>
 <b>NOTE:</b> calling code <i>must</i> call <a href="#commit()"><code>commit()</code></a> for
  the watch to be registered with the database.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key to watch for changes in value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletableFuture</code> that will become ready when the value changes</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="FDBException.html" title="class in com.apple.foundationdb">FDBException</a></code> - if too many watches have been created on this database. The
  limit defaults to 10,000 and can be modified with a call to
  <a href="DatabaseOptions.html#setMaxWatches(long)"><code>DatabaseOptions.setMaxWatches(long)</code></a>.</dd>
</dl>
</li>
</ul>
<a id="getDatabase()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDatabase</h4>
<pre class="methodSignature"><a href="Database.html" title="interface in com.apple.foundationdb">Database</a>&nbsp;getDatabase()</pre>
<div class="block">Returns the <a href="Database.html" title="interface in com.apple.foundationdb"><code>Database</code></a> that this <code>Transaction</code> is interacting
 with.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <a href="Database.html" title="interface in com.apple.foundationdb"><code>Database</code></a> object</dd>
</dl>
</li>
</ul>
<a id="run(java.util.function.Function)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre class="methodSignature">&lt;T&gt;&nbsp;T&nbsp;run&#8203;(java.util.function.Function&lt;? super <a href="Transaction.html" title="interface in com.apple.foundationdb">Transaction</a>,&#8203;T&gt;&nbsp;retryable)</pre>
<div class="block">Run a function once against this <code>Transaction</code>. This call blocks while
  user code is executing, returning the result of that code on completion.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="TransactionContext.html#run(java.util.function.Function)">run</a></code>&nbsp;in interface&nbsp;<code><a href="TransactionContext.html" title="interface in com.apple.foundationdb">TransactionContext</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the return type of <code>retryable</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>retryable</code> - the block of logic to execute against this <code>Transaction</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a result of the single call to <code>retryable</code></dd>
</dl>
</li>
</ul>
<a id="runAsync(java.util.function.Function)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runAsync</h4>
<pre class="methodSignature">&lt;T&gt;&nbsp;java.util.concurrent.CompletableFuture&lt;T&gt;&nbsp;runAsync&#8203;(java.util.function.Function&lt;? super <a href="Transaction.html" title="interface in com.apple.foundationdb">Transaction</a>,&#8203;? extends java.util.concurrent.CompletableFuture&lt;T&gt;&gt;&nbsp;retryable)</pre>
<div class="block">Run a function once against this <code>Transaction</code>. This call returns
  immediately with a <code>CompletableFuture</code> handle to the result.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="TransactionContext.html#runAsync(java.util.function.Function)">runAsync</a></code>&nbsp;in interface&nbsp;<code><a href="TransactionContext.html" title="interface in com.apple.foundationdb">TransactionContext</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the return type of <code>retryable</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>retryable</code> - the block of logic to execute against this <code>Transaction</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletableFuture</code> that will be set to the return value of <code>retryable</code></dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">void&nbsp;close()</pre>
<div class="block">Close the <code>Transaction</code> object and release any associated resources. This must be called at
  least once after the <code>Transaction</code> object is no longer in use. This can be called multiple
  times, but care should be taken that it is not in use in another thread at the time of the call.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
